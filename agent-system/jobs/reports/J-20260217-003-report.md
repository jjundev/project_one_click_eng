# Report: J-20260217-003 - Restore Summary-first flow with optional Quiz branch

## Summary (What changed)
- 학습 완료 후 전환 지점을 `DialogueQuizFragment`에서 `DialogueSummaryFragment`로 복원해 Summary-first 흐름을 다시 적용했습니다.
- `DialogueSummaryFragment` 하단 시트에 `학습 종료`와 `퀴즈 진행` 2개 CTA를 제공하도록 UI와 클릭 핸들러를 확장했습니다.
- Summary -> Quiz 전환 시 `summaryJson`, `featureBundleJson` 인자를 그대로 전달하도록 네비게이션을 연결했습니다.
- 본 작업 범위 로그를 `JOB_J-20260217-003` 태그(`BuildConfig.DEBUG` 가드)로 추가했습니다.
- 학습 완료 바텀시트 문구를 Summary-first UX에 맞게 조정했습니다.

## Files touched (Actual)
- `app/src/main/java/com/example/test/fragment/DialogueLearningFragment.java`
- `app/src/main/java/com/example/test/fragment/DialogueSummaryFragment.java`
- `app/src/main/res/layout/fragment_dialogue_summary.xml`
- `app/src/main/res/values/strings.xml`

## How to test (Step-by-step)
1) `./gradlew :app:assembleDebug`로 디버그 빌드를 생성합니다.
2) 앱에서 대화 학습을 끝까지 진행한 뒤 학습 완료 바텀시트에서 `학습 요약 보기`를 선택합니다.
3) 완료 직후 첫 진입 화면이 `DialogueSummaryFragment`인지 확인합니다.
4) Summary에서 `완료 후 나가기`를 선택해 기존 종료 동작(액티비티 종료/복귀)이 유지되는지 확인합니다.
5) 다시 학습 완료 후 Summary에서 `퀴즈 진행`을 선택해 `DialogueQuizFragment`로 이동하고 첫 문제가 노출되는지 확인합니다.
6) Quiz에서 뒤로가기를 눌러 Summary로 복귀되는지 확인합니다.
7) Summary에서 뒤로가기를 눌러 기존 액티비티 뒤로가기 규칙(학습 화면 복귀/종료 다이얼로그)과 일치하는지 확인합니다.

## Build Result
- Ran:
  - `./gradlew :app:spotlessApply :app:spotlessCheck :app:assembleDebug :app:testDebugUnitTest`
- Result: PASS
- Notes:
  - Gradle configuration-time resolution 경고가 1건 출력되었으나 빌드/테스트는 성공했습니다.

## Logcat
- Tag: `JOB_J-20260217-003`
- Filter:
  - `adb logcat | grep JOB_J-20260217-003`
- Expected:
  - Summary 진입 로그(`summary fragment entered`)
  - Summary 액션 로그(`summary finish selected`, `summary quiz selected`)
  - Learning -> Summary 전환 로그(`navigate to summary fragment`)
- Observed:
  - 코딩 단계에서는 런타임 Logcat 실측 미수행(QA 단계에서 실기기/에뮬레이터 확인 필요)

## QA Checklist (Copy from Job + Observations)
### UX
- [ ] 시나리오 1: 학습 완료 후 Summary 화면이 먼저 노출된다. (코딩 단계 미검증)
- [ ] 시나리오 2: Summary에서 `학습 종료` 선택 시 즉시 종료/복귀 동작이 정상 수행된다. (코딩 단계 미검증)
- [ ] 시나리오 3: Summary에서 `퀴즈 진행` 선택 시 Quiz 화면으로 이동하고 첫 문제가 표시된다. (코딩 단계 미검증)
- [ ] 시나리오 4: Quiz에서 뒤로가기 시 Summary로 돌아오며 상태 전환이 자연스럽다. (코딩 단계 미검증)
- [ ] 시나리오 5: Quiz API 실패/빈 응답에서도 오류 UI가 표시되고 크래시가 없다. (코딩 단계 미검증)

### Logcat
- [ ] 기대 로그 1: Summary 진입 및 사용자 액션(종료/퀴즈 선택) 이벤트 로그 (코딩 단계 미검증)
- [ ] 기대 로그 2: Summary -> Quiz 네비게이션 또는 종료 분기 결과 로그 (코딩 단계 미검증)

## Risks / Edge cases
- Summary 인자가 비정상(`summaryJson == null`)일 경우 Quiz 초기화가 에러 화면으로 전환될 수 있습니다. 현재 구현은 기존 Quiz 오류 처리 플로우를 그대로 따릅니다.
- Summary 하단 시트 노출은 스크롤 하단 도달 조건 기반이므로, QA에서 단말 해상도별 노출 타이밍 확인이 필요합니다.

## Rollback
- `DialogueLearningFragment`의 Summary 라우팅 분기와 `DialogueSummaryFragment`의 퀴즈 CTA/네비게이션 추가분만 revert하면 직전 흐름으로 즉시 복구 가능합니다.
