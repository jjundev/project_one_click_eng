당신은 10년 이상의 경력을 가진 Android 시니어 아키텍트입니다.
현재 프로젝트는 Java 기반의 Android Studio 프로젝트입니다.

지금부터 이 프로젝트의 전체 코드베이스를 정밀 분석하고,
사용자의 요구사항에 맞게 구조화된 리팩토링 계획을 Markdown 보고서 파일로 작성해 주세요.

분석이 끝나면 반드시 프로젝트 루트에 `REFACTORING_PLAN.md` 파일을 생성하세요.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[1단계] 프로젝트 전체 탐색
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

먼저 아래 항목들을 파악하세요:

- 프로젝트 디렉토리 구조 (모듈, 패키지 구성)
- build.gradle (프로젝트/앱 수준) 설정 및 의존성 목록
- minSdkVersion, targetSdkVersion, compileSdkVersion
- 사용 중인 주요 라이브러리 (Retrofit, Room, Dagger/Hilt, RxJava, Glide 등)
- AndroidManifest.xml의 권한, Activity/Service/Receiver 선언
- 전체 Java 파일 수, 총 코드 라인 수
- 테스트 코드 존재 여부 (unit test, instrumented test)
- ProGuard/R8 규칙 파일 여부

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[2단계] 정밀 분석 - 아래 7개 카테고리별로 문제를 찾으세요
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

### A. 아키텍처 패턴

- MVC/MVP/MVVM/MVI 중 어떤 패턴을 사용 중인가?
- 패턴이 일관되게 적용되어 있는가?
- Activity/Fragment에 비즈니스 로직이 직접 들어있는 God Activity/Fragment가 있는가?
- 계층 간 의존성 방향이 올바른가? (Presentation → Domain → Data)
- Repository 패턴이 적용되어 있는가?
- UseCase/Interactor 계층이 존재하는가?

### B. Android 컴포넌트 & 생명주기

- Activity/Fragment에서 Context 누수가 발생할 수 있는 코드가 있는가?
- 생명주기를 고려하지 않은 비동기 작업이 있는가? (예: AsyncTask 사용, Activity 종료 후 콜백)
- onSaveInstanceState/onRestoreInstanceState 처리가 누락된 화면이 있는가?
- Fragment 간 통신이 직접 참조로 이루어지고 있는가? (SharedViewModel 미사용)
- Configuration change (화면 회전 등) 대응이 미비한 곳이 있는가?
- Deprecated API 사용 여부 (AsyncTask, Loader, LocalBroadcastManager 등)

### C. 코드 품질

- 500줄 이상의 거대 클래스가 있는가?
- 50줄 이상의 긴 메서드가 있는가?
- 중복 코드 (동일/유사 로직이 2곳 이상 반복)가 있는가?
- 매직 넘버/매직 스트링이 하드코딩되어 있는가?
- 네이밍 컨벤션이 일관되지 않은 곳이 있는가?
- 과도한 중첩 (3단계 이상의 if/for 중첩)이 있는가?
- 사용되지 않는 import, 변수, 메서드가 있는가?
- Null 처리가 미비한 곳이 있는가? (@Nullable/@NonNull 미사용)

### D. 네트워크 & 데이터

- API 호출 시 에러 핸들링이 일관되게 처리되고 있는가?
- 네트워크 응답 캐싱 전략이 있는가?
- Room/SQLite 쿼리에 인덱스가 적절히 설정되어 있는가?
- SharedPreferences에 민감한 정보가 평문 저장되어 있는가?
- JSON 파싱 시 예외 처리가 누락된 곳이 있는가?
- 메인 스레드에서 네트워크/DB 작업을 하는 곳이 있는가?

### E. UI & 리소스

- RecyclerView에 ViewHolder 패턴이 올바르게 적용되어 있는가?
- 이미지 로딩 시 메모리 관리가 적절한가? (OOM 위험)
- 레이아웃 중첩 깊이가 과도한 곳이 있는가? (3단계 이상 중첩 LinearLayout 등)
- ConstraintLayout으로 전환 가능한 비효율적 레이아웃이 있는가?
- strings.xml에 하드코딩 문자열 대신 리소스를 사용하지 않는 곳이 있는가?
- 다크모드/다국어/접근성 대응이 미비한 곳이 있는가?
- Drawable 리소스에 밀도별(hdpi, xhdpi 등) 대응이 적절한가?

### F. 보안

- AndroidManifest.xml에 불필요하게 exported="true"인 컴포넌트가 있는가?
- WebView에서 JavaScript 인터페이스 사용 시 보안 취약점이 있는가?
- 디버그 빌드와 릴리즈 빌드가 분리되어 있는가?
- API 키, 시크릿이 코드에 하드코딩되어 있는가?
- 사용자 입력에 대한 유효성 검증이 누락된 곳이 있는가?
- HTTPS 적용 여부 및 네트워크 보안 설정(network_security_config.xml) 확인
- 로그에 민감한 정보가 출력되고 있는가? (Log.d 등 릴리즈에서 미제거)

### G. 빌드 & 의존성

- 더 이상 유지보수되지 않는 라이브러리가 있는가?
- 알려진 보안 취약점이 있는 의존성 버전이 있는가?
- build.gradle에 불필요한 의존성이 있는가?
- 빌드 속도를 저하시키는 설정이 있는가?
- Gradle 버전, Android Gradle Plugin 버전이 최신에 가까운가?
- buildSrc 또는 Version Catalog(libs.versions.toml)로 의존성 관리가 되어 있는가?

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[3단계] 보고서 작성 규칙
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

`REFACTORING_PLAN.md` 파일을 프로젝트 루트에 생성하고, 아래 구조를 정확히 따르세요:
```markdown
# 🔍 [프로젝트명] 리팩토링 분석 보고서

> 분석 일시: YYYY-MM-DD
> 분석 대상: [프로젝트 루트 경로]

---

## 1. 프로젝트 개요

| 항목 | 내용 |
|------|------|
| 패키지명 | com.example.xxx |
| minSdk / targetSdk / compileSdk | XX / XX / XX |
| Java 파일 수 | XX개 |
| 총 코드 라인 수 (테스트 제외) | 약 X,XXX줄 |
| 아키텍처 패턴 | MVC / MVP / MVVM / 혼재 |
| 주요 라이브러리 | Retrofit, Room, Glide 등 |
| 테스트 커버리지 | 있음(X개) / 없음 |
| 모듈 구성 | 단일 모듈 / 멀티 모듈 |

---

## 2. 발견된 문제 목록

### 🔴 Critical (즉시 수정 필요)

#### C-001: [문제 제목]
- **카테고리**: A~G 중 해당 카테고리
- **파일**: `app/src/main/java/com/example/...`
- **문제**: 구체적으로 무엇이 문제인지 코드 예시와 함께 설명
- **영향**: 이 문제가 앱 동작, 성능, 보안에 미치는 구체적 영향
- **해결 방안**: 어떻게 수정해야 하는지 구체적 코드 변경 방향 제시

#### C-002: ...

### 🟠 Major (1~2주 내 수정 권장)

#### M-001: [문제 제목]
- (동일 형식)

### 🟡 Minor (점진적 개선)

#### m-001: [문제 제목]
- (동일 형식)

---

## 3. 리팩토링 실행 계획

### Phase 1: 긴급 수정 (1주차)

> 앱 크래시, 보안 취약점, 데이터 유실 위험이 있는 항목

| 순서 | 이슈 ID | 작업 내용 | 예상 소요 | 영향 범위 | 선행 조건 |
|------|---------|-----------|-----------|-----------|-----------|
| 1 | C-001 | ... | 2시간 | ... | 없음 |
| 2 | C-002 | ... | 4시간 | ... | C-001 완료 |

### Phase 2: 구조 개선 (2~3주차)

> 아키텍처 정리, 기술 부채 해소

| 순서 | 이슈 ID | 작업 내용 | 예상 소요 | 영향 범위 | 선행 조건 |
|------|---------|-----------|-----------|-----------|-----------|
| 1 | M-001 | ... | 1일 | ... | Phase 1 완료 |

### Phase 3: 품질 향상 (4주차~)

> 코드 스타일, 테스트 추가, 성능 최적화

| 순서 | 이슈 ID | 작업 내용 | 예상 소요 | 영향 범위 | 선행 조건 |
|------|---------|-----------|-----------|-----------|-----------|
| 1 | m-001 | ... | 2시간 | ... | 없음 |

---

## 4. Kotlin 마이그레이션 가이드 (해당 시)

> Java → Kotlin 전환이 권장되는 경우, 전환 우선순위와 전략을 제시

| 우선순위 | 대상 파일/클래스 | 전환 난이도 | 이유 |
|---------|-----------------|------------|------|
| 1 | data class들 | 쉬움 | Kotlin data class로 보일러플레이트 제거 |
| 2 | Utility 클래스 | 쉬움 | Extension function 활용 |
| 3 | ViewModel | 보통 | Coroutine/Flow 전환 |
| ... | ... | ... | ... |

---

## 5. 권장 도구 & 설정

### 즉시 도입 권장
- **정적 분석**: Android Lint 규칙 강화, ktlint/checkstyle 설정
- **의존성 검사**: Gradle Versions Plugin 또는 Dependabot
- **코드 포맷**: .editorconfig 통일

### 점진적 도입 권장
- **CI/CD**: GitHub Actions 또는 기존 파이프라인에 lint/test 자동화
- **테스트**: JUnit 5 + MockK(또는 Mockito) + Espresso
- **아키텍처**: Hilt(DI), Navigation Component, ViewBinding/DataBinding 통일

---

## 6. 리스크 & 주의사항

- 각 Phase별 롤백 전략
- 리팩토링 중 기존 기능 회귀 방지를 위한 테스트 체크리스트
- 팀 내 코드 리뷰 시 특별히 확인할 포인트
```

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[필수 지침]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. 반드시 실제 코드를 읽고 분석하세요. 추측하지 마세요.
2. 문제를 지적할 때 반드시 해당 파일 경로와 구체적 코드 위치를 명시하세요.
3. 해결 방안은 "~해야 합니다" 수준이 아니라, 구체적인 코드 변경 방향을 제시하세요.
4. 발견된 문제가 없는 카테고리는 "문제 없음"으로 명시하세요.
5. 보고서는 반드시 `REFACTORING_PLAN.md` 파일로 프로젝트 루트에 저장하세요.
6. 분석 완료 후 터미널에 요약을 출력하세요:
   - Critical 이슈 수
   - Major 이슈 수
   - Minor 이슈 수
   - 가장 시급한 3가지 조치사항

지금 프로젝트 루트의 파일 목록부터 확인하고 분석을 시작하세요.