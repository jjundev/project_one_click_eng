# GEMINI.md — Agent 실수 기록 및 행동 지침

> 이 파일은 AI 에이전트가 작업 중 저지른 실수를 누적 기록하고,
> 다음 작업에서 동일한 실수를 반복하지 않도록 안내하는 문서입니다.
> **모든 새 작업 시작 전에 반드시 이 파일을 읽고 숙지하세요.**

---

## 📌 필수 행동 원칙 (항상 준수)

- 작업 전 이 파일 전체를 읽고 과거 실수를 확인한다.
- 확신이 없는 명령어나 작업은 실행 전에 사용자에게 확인을 구한다.
- 파일 삭제, 덮어쓰기, 권한 변경 등 되돌리기 어려운 작업은 반드시 사전 고지한다.
- 작업 완료 후 실수가 있었다면 이 파일에 즉시 기록한다.

---

## 🗂️ 실수 기록

> 형식: 날짜 | 심각도 | 카테고리 | 요약
> 심각도: 🔴 Critical / 🟠 High / 🟡 Medium / 🟢 Low

---

### [YYYY-MM-DD] 실수 제목을 간결하게 작성

- **심각도**: 🟡 Medium
- **카테고리**: `파일 조작` / `명령어 오류` / `경로 실수` / `의존성` / `기타`
- **작업 컨텍스트**: 어떤 작업을 하던 중이었는지 한 줄 설명
- **실수 내용**: 무엇을 잘못했는지 구체적으로 서술
- **원인 분석**: 왜 이 실수가 발생했는지
- **실제 결과**: 이 실수로 인해 어떤 일이 발생했는지
- **올바른 방법**: 앞으로 이 상황에서 어떻게 행동해야 하는지
- **재발 방지 규칙**: `[ ] 실행 전 ~~을 확인한다`

---

<!-- 아래에 실수 기록을 계속 추가하세요 -->

### [2026-02-27] multi_replace_file_content 사용 시 기존 import 구문 누락

- **심각도**: 🟡 Medium
- **카테고리**: 파일 조작
- **작업 컨텍스트**: `LoginActivity.java`에 `FirebaseFirestore` import를 추가하기 위해 `multi_replace_file_content` 툴을 사용하던 중
- **실수 내용**: TargetContent의 첫 줄이었던 `import com.google.firebase.auth.FirebaseAuth;`를 ReplacementContent에서 실수로 누락시켜 의도치 않게 삭제해버림.
- **원인 분석**: 툴의 ReplacementChunk를 작성할 때, TargetContent에 명시된 원래의 코드 조각 중 유지해야 할 부분을 ReplacementContent에도 온전히 포함시키는 크로스체크가 미흡했음.
- **실제 결과**: `FirebaseAuth` 심볼을 찾을 수 없다는 컴파일 에러가 발생하여 안드로이드 빌드(`assembleDebug`)가 실패했고, 추가적인 수정 작업이 필요했음.
- **올바른 방법**: `multi_replace_file_content` 또는 `replace_file_content` 툴을 사용할 때는 반드시 TargetContent에 포함된 기존 코드 중 보존되어야 할 라인들이 ReplacementContent에 빠짐없이 포함되어 있는지 다시 한번 확인해야 함.
- **재발 방지 규칙**: `[ ] multi_replace_file_content 사용 시 유지해야 할 기존 코드가 번역/교체 컨텐츠에 제대로 포함되었는지 반드시 대조/확인한다.`

### [2026-02-27] 다이얼로그 레이아웃 추가 시 연관 Drawable/Color 리소스 누락

- **심각도**: 🟡 Medium
- **카테고리**: 기타
- **작업 컨텍스트**: 설정 화면 내 비밀번호 변경 기능을 위한 `dialog_change_password.xml` 레이아웃 파일 생성
- **실수 내용**: 다이얼로그 레이아웃에서 참조하는 배경 Drawable(bg_edittext 등) 및 컬러 리소스(color_hint_text 등)를 함께 추가하지 않고 xml 레이아웃만 단독으로 작성함.
- **원인 분석**: UI 요소 작성에 집중하여, 파일 내에서 참조하고 있는 @drawable, @color 속성이 프로젝트 내에 이미 존재하는지 크로스체크가 누락됨.
- **실제 결과**: `Android resource linking failed` 에러가 다수 발생해 앱 빌드가 실패했고, 추가 작업(수정)이 필요했음.
- **올바른 방법**: 새로운 layout XML을 작성/수정할 때는, 해당 파일에서 처음으로 도입하는 혹은 누락 가능성이 있는 리소스 식별자를 미리 확인하고 동시에 생성해야 함.
- **재발 방지 규칙**: `[ ] 레이아웃 XML 파일 생성/수정 시 참조하는 모든 리소스(drawable, color, string)가 함께 생성되었거나 이미 존재하는지 점검한다.`

---

## 🚫 절대 하지 말 것 (Do NOT)

> 과거 실수에서 도출된 금지 행동 목록. 실수 추가 시 여기도 업데이트한다.

- [ ] 예시: `rm -rf` 명령어를 경로 확인 없이 실행하지 않는다
- [ ] 예시: 환경변수 파일(`.env`)을 git에 커밋하지 않는다
- [ ] 예시: 프로덕션 DB에 직접 쿼리를 실행하지 않는다
- [ ] 레이아웃 XML 파일 생성/수정 시 참조하는 모든 리소스(drawable, color, string)의 존재 여부를 무시하고 단독으로만 커밋(기록)하지 않는다.
- [ ] multi_replace_file_content 등 파일 조작 툴 사용 시 유지해야 할 기존 코드 라인을 누락하여 의도치 않게 삭제하지 않는다.

---

## ✅ 작업 전 체크리스트

> 매 작업 시작 시 아래를 확인한다.

- [ ] 현재 작업 디렉토리가 올바른가? (`pwd`)
- [ ] 올바른 git branch에 있는가? (`git branch`)
- [ ] 필요한 환경변수가 설정되어 있는가?
- [ ] 이 파일의 "절대 하지 말 것" 목록을 확인했는가?
- [ ] 되돌리기 어려운 작업이 포함되어 있다면 사용자에게 고지했는가?
- [ ] (안드로이드/프론트 개발 시) 레이아웃/UI 파일 작성 시 참조하는 외부 리소스 파일을 올바르게 포함시켰는가?
- [ ] 파일 내용 수정 툴(multi_replace_file_content 등) 사용 시 교체 내용 중 기존 코드가 잘못 삭제되지 않았는지 확인했는가?

---

## 📊 실수 통계

| 카테고리 | 횟수 |
|----------|------|
| 파일 조작 | 1 |
| 명령어 오류 | 0 |
| 경로 실수 | 0 |
| 의존성 | 0 |
| 기타 | 1 |
| **합계** | **2** |

---

## 📝 업데이트 방법

새 실수 발생 시:
1. `## 🗂️ 실수 기록` 섹션에 새 항목 추가 (최신 순)
2. 해당 규칙을 `## 🚫 절대 하지 말 것` 목록에 추가
3. `## 📊 실수 통계` 카운트 업데이트
4. 필요 시 `## ✅ 작업 전 체크리스트` 항목 추가

---

*마지막 업데이트: 2026-02-27 | 총 기록된 실수: 2건*